!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e="undefined"!=typeof globalThis?globalThis:e||self).BuzPickupPointLoader=i()}(this,(function(){"use strict";function e(e,i,o){return i in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}return class{constructor(i){e(this,"elementSelector",void 0),e(this,"url",void 0),e(this,"closeOnSelect",!0),e(this,"onSelect",void 0),e(this,"onClose",void 0),e(this,"pickupPointContainerElem",void 0);const{elementSelector:o,url:t,onSelect:n}=i;if(o&&(this.pickupPointContainerElem=document.querySelector(o)),o&&null===this.pickupPointContainerElem)throw Error("Invalid elementSelector was given, could not find a DOM element");if(void 0===t)throw Error('"url" is a required property');if(void 0===n)throw Error('"onSelect" is a required property');Object.assign(this,i),this.loadEventListeners()}show(e){const{postcode:i,country:o,addressNumber:t,addressNumberAddition:n,filter:r}=e;if(void 0===i)throw Error('"postcode" is a required property');if(void 0===o)throw Error('"country" is a required property');if(!new RegExp(/^[A-Z]*$/).test(o))throw Error('"country" is invalid, use an uppercase ISO 3166-1 alpha-2 code');const s=new URL(this.url);s.searchParams.append("postcode",i),s.searchParams.append("country",o),t&&s.searchParams.append("addressNumber",t),n&&s.searchParams.append("addressNumberAddition",n),r&&r.distributor&&r.distributor.forEach((e=>{s.searchParams.append("distributor[]",e)}));const d='\n        <div id="buz_pickup_point_modal" class="buz__pickup-point-modal">\n            <div class="buz__pickup-point-modal__container">\n              <div class="buz__pickup-point-modal__body">\n                  <iframe src="'.concat(s.href,'"></iframe>\n              </div>\n            </div>\n            <div class="buz__pickup-point-modal__backdrop"></div>\n        </div>\n    ');if(this.closeModal(),this.pickupPointContainerElem)this.pickupPointContainerElem.innerHTML=this.pickupPointContainerElem.innerHTML+d;else{const e=document.createElement("div");e.setAttribute("id","buz_pickup_point_modal_wrapper"),e.innerHTML=d,document.body.append(e)}}close(){this.closeModal()}closeModal(){const e=document.querySelector("#buz_pickup_point_modal");if(e&&e.parentNode){const i=e.parentNode;if(i&&!this.pickupPointContainerElem&&"buz_pickup_point_modal_wrapper"===i.getAttribute("id")){const e=i.parentNode;e&&e.removeChild(i)}}}loadEventListeners(){window.addEventListener("message",(e=>{if(e.origin&&-1===e.origin.indexOf("http://localhost")&&-1===e.origin.indexOf(".boekuwzending.com"))return;const{event:i,data:o}=e.data;switch(i){case"buz:pickup_point:selected":this.onSelect(o),this.closeOnSelect&&this.closeModal();break;case"buz:window:close":this.closeModal(),this.onClose&&this.onClose()}}))}}}));